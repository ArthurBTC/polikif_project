<!DOCTYPE html>
<html>
<head>

	<meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
	
{% load staticfiles %}

	<link rel="stylesheet" type="text/css" href="{% static 'univok/style.css' %}">
	<link rel="stylesheet" type="text/css" href="{% static 'univok/anim.css' %}">
	<link rel="stylesheet" type="text/css" href="{% static 'gdpcore/joint.css' %}" />
<!--	<link rel="stylesheet" type="text/css" href="{% static 'gdpcore/nopadding.css' %}">	 -->
	<link rel="stylesheet" type="text/css" href="{% static 'gdpcore/css/bootstrap.min.css' %}">
	<link rel="stylesheet" type="text/css" href="{% static 'gdpcore/jquery-ui-1.11/jquery-ui.min.css' %}">
	<link rel="stylesheet" type="text/css" href="{% static 'gdpcore/animate.css' %}">
	
	<script src="{% static 'gdpcore/jquery.min.js' %}"></script>
	<script src="{% static 'gdpcore/jquery-ui-1.11/jquery-ui.min.js' %}"></script>	
	<script src="{% static 'gdpcore/js/bootstrap.min.js' %}"></script>
	<script src="{% static 'gdpcore/lodash.min.js' %}"></script>
	<script src="{% static 'gdpcore/backbone-min.js' %}"></script>
	<script src="{% static 'gdpcore/joint.js' %}"></script>
	<script src="{% static 'gdpcore/googlecharts.js' %}"></script>
	

	<script src="https://cdn.rawgit.com/ariutta/svg-pan-zoom/master/dist/svg-pan-zoom.min.js"></script>	


</head>
<body>

<div class="container">
	<div class="row">
		<div class="col-md-3">
			<img id = "logo" src = "{% static 'gdpcore/ecossolies.png' %}" onclick="window.location='/univok/index';"></img>
		</div>
		<div class="col-md-9 titleContainer">
			<span class = "title">{{event.name}}</span>
		</div>
	</div>
	
	<div class="row">
	
		<ul class="nav nav-tabs">
		  <li role="presentation" class="active"><a href="#">Accueil</a></li>
		  <li role="presentation"><a href="/univok/idees/{{event.id}}">Idées</a></li>
		  <li role="presentation"><a href="#">Ressources</a></li>
		</ul>
	

	</div>
	<div class="row">
		<div class = 'subtitle'>Photos</div>
	</div>
	<div class="row">
		<img src = "{% static 'gdpcore/slideshow.png' %}" height="400" width="800" ></img>
	</div>		
	<div class="row">
		<div class = 'subtitle'>Synthèse</div>
	</div>
	<div class="row animContainer">
	<!--	<iframe src="/gdpcore/puretheater/4" width="1000" height="500"></iframe> -->
		<img id="starter" class="animPlay" src = "{% static 'gdpcore/play.png' %}" ></img>
	</div>
	<div class="row">
		<div class = 'subtitle'>Intervenants</div>
	</div>	
	
	{% for speaker in event.speakers.all %}
		<div class="row">
			<div>{{ speaker.name }}</div>
			<div>{{ speaker.description }}</div>
		</div>
	{% endfor %}

</div>

<img id="blackUnivok" class = "cta anim" src="{% static 'univok/blackUnivok.png' %}" alt="Play">

<div id="myholder" class = "anim"></div>
<img id="playAnim" class = "anim" src="{% static 'gdpcore/play.png' %}" alt="Play">
<img id="stopAnim" class = "anim" src="{% static 'gdpcore/stop.png' %}" alt="Pause">
<img id="closeCross" class = "anim" src="{% static 'gdpcore/closecross.png' %}" alt="Cancel">
{% include "gdpcore/showparts.html" %}

<div id="callToAction" class = "cta"></div>
<img id="ctaOk" class = "cta ctaImg" src="{% static 'gdpcore/ctaOk.png' %}" alt="Play">
<div id="ctaOkText" class = "cta ctaText">J'ai tout compris !</div>
<img id="ctaNok" class = "cta ctaImg" src="{% static 'gdpcore/ctaNok.png' %}" alt="Play">
<div id="ctaNokText" class = "cta ctaText">J'ai une question, une remarque...</div>
<img id="ctaAgain" class = "cta ctaImg" src="{% static 'gdpcore/ctaAgain.png' %}" alt="Play">
<div id="ctaAgainText" class = "cta ctaText">Relancer la vidéo</div>
<img id="ctaGraph" class = "cta ctaImg" src="{% static 'gdpcore/ctaGraph.png' %}" alt="Play">
<div id="ctaGraphText" class = "cta ctaText">Voir le graphe</div>

<div id="ctaMerci" class="cta2">Merci !</div>	

<img id="ctaQueAccurate" class = "ctaQue ctaQueImg" src="{% static 'gdpcore/ctaQueAccurate.png' %}">
<div id="ctaQueAccurateText" class = "ctaQue ctaQueText">J'ai une remarque/question sur un point précis de la vidéo</div>
<img id="ctaQueGeneral" class = "ctaQue ctaQueImg" src="{% static 'gdpcore/ctaQueGeneral.png' %}">
<div id="ctaQueGeneralText" class = "ctaQue ctaQueText">J'ai une question d'ordre général</div>
<img id="ctaQueBack" class = "ctaQue ctaQueImg" src="{% static 'gdpcore/ctaQueBack.png' %}">
<div id="ctaQueBackText" class = "ctaQue ctaQueText">Je n'ai plus de question en fait</div>

<div id="ctaForm" class="cta2" class="form-horizontal">
  
  <div class="form-group">
    <label for="inputEmail3" class="col-sm-2 control-label">Question</label>
    <div class="col-sm-10">
      <textarea class="form-control" rows="3" placeholder="Votre question"></textarea>
    </div>	
  </div>
  <div class="form-group">
    <label for="inputEmail3" class="col-sm-2 control-label">Email</label>
    <div class="col-sm-10">
      <input type="email" class="form-control" id="inputEmail3" placeholder="Email">
    </div>
  </div>
  <div class="form-group">
    <div class="col-sm-offset-2 col-sm-10">
      <button id="submitQuestion" class="btn btn-default">Sign in</button>
    </div>
  </div>
</div>


<script>

	{% include "gdpcore/grapher.js" %}

	var selectTime = 1200;
	var selectTimeNext = 2000;
	
	function selectHandlerAnim(type, elemId){
	
		$('.'+type+'Img').removeClass('animated bounceInLeft');
		$('.'+type+'Text').removeClass('animated bounceInRight');
	
		$('.'+type+'Img').not("#"+type+elemId).addClass('animated bounceOutLeft');
		$('.'+type+'Text').not("#"+type+elemId+"Text").addClass('animated bounceOutRight');
		
		setTimeout("$('#"+type+elemId+"').addClass('animated bounceOutLeft');",selectTime);
		setTimeout("$('#"+type+elemId+"Text').addClass('animated bounceOutRight');",selectTime);	
		
	}
	
	
	
	function initAnim(){
		console.log('initAnim');
		allCells = graph.getCells();
		allCells.forEach(function(entry) {
			entry.attr('./display','none');
		});		
		
		$(".anim").show();
		$('.cta, .cta2').hide();
		$("#blackUnivok").show();
		$("#stopAnim").hide();
		
		$('#callToAction').removeClass('fullscreen');		
		$('#myholder').addClass('fullscreen');
		paper.setDimensions($('#myholder').width(), $('#myholder').height()); 	

		$("#playAnim").removeClass('animated bounceOutRight');	
		$("#playAnim").addClass('animated bounceInLeft');			
	}
	
	function initCta(){
		console.log('initCta');		
		stopshow();
		$(".anim, cta2").hide();
		$(".cta").show();
		$("#blackUnivok").show();
		
		$('#myholder').removeClass('fullscreen');
		$('#callToAction').addClass('fullscreen');
		
		$('.ctaImg').removeClass('bounceOutLeft');
		$('.ctaText').removeClass('bounceOutRight');
		
		$('.ctaImg').addClass('animated bounceInLeft');
		$('.ctaText').addClass('animated bounceInRight');

		
		$( "body" ).one("click", "#ctaOk", function(event) {	
			selectHandlerAnim('cta','Ok');
			sayThanks('A bientôt, et merci !','green');
			setTimeout(initPage,5000)
		});
		
		$( "body" ).one("click", "#ctaNok", function(event) {		
			selectHandlerAnim('cta','Nok');
			setTimeout(initCtaQuestion, selectTimeNext);							
		});
		
		$( "body" ).one("click", "#ctaAgain", function(event) {	
			selectHandlerAnim('cta','Again');
			setTimeout(initAnim, selectTimeNext);
		});		

		$( "body" ).one("click", "#ctaGraph", function(event) {	
			selectHandlerAnim('cta','Graph');
			setTimeout(initGraph, selectTimeNext);
		});			
		
	}

	function initCtaQuestion(){
		
		console.log('initCtaQuestion');		
		stopshow();
		$(".anim, cta2").hide();
		$(".ctaQue").show();
		$("#blackUnivok").show();
		
		$('#myholder').removeClass('fullscreen');
		$('#callToAction').addClass('fullscreen');
		
		$('.ctaQueImg').removeClass('bounceOutLeft');
		$('.ctaQueText').removeClass('bounceOutRight');
		
		$('.ctaQueImg').addClass('animated bounceInLeft');
		$('.ctaQueText').addClass('animated bounceInRight');

		
		$( "body" ).one("click", "#ctaQueAccurate", function(event) {					
		});		

		$( "body" ).one("click", "#ctaQueGeneral", function(event) {	
			selectHandlerAnim('ctaQue','General');
			setTimeout(initGeneralForm, selectTimeNext);
		});	

		$( "body" ).one("click", "#ctaQueBack", function(event) {	
			selectHandlerAnim('ctaQue','Back');
			setTimeout(initCta, selectTimeNext);
		});	
		
	}	

	function initGeneralForm(){
	
		$('#ctaForm').removeClass('animated bounceOutRight');	
		$('#ctaForm').show();
		$('#ctaForm').addClass('animated bounceInLeft');
	}

	function initPage(){
		stopshow();
		$('.anim, .cta, .cta2, .ctaQue, #blackUnivok').hide();
		$('#myholder').removeClass('fullscreen');
		$('#callToAction').removeClass('fullscreen');
	}
	
	function sayThanks(text, color){
		$('#ctaMerci').text(text);
		$('#ctaMerci').css('color',color);
		
		$('#ctaMerci').removeClass('animated bounceOutRight');	
		setTimeout("$('#ctaMerci').show();", 1000);
		setTimeout("$('#ctaMerci').addClass('animated bounceInLeft');", 1000);
		setTimeout("$('#ctaMerci').addClass('animated bounceOutRight');", 4000);
//		setTimeout(initPage, 4000);	
	}

	function initGraph(){
		console.log('initGraph');
		allCells = graph.getCells();
		allCells.forEach(function(entry) {
			entry.attr('./display','');
		});		

		$(".anim").show();		
		$('.cta, .cta2').hide();
		$("#blackUnivok").show();
		$("#stopAnim,#playAnim").hide();		
	
		$('#callToAction').removeClass('fullscreen');		
		$('#myholder').addClass('fullscreen');	
		paper.setDimensions($('#myholder').width(), $('#myholder').height());
		
		setGridZoom(paper, 'myholder', 0);
		
	}

	
	$( document ).ready(function() {
		paper = addPaper('myholder');
		firstLoadFromShowparts('myholder');

		initPage();
		
		$('#starter').click(function(e){		
			//initAnim();
			initCta();			
		});		
		
		$( "body" ).on("click", "#playAnim", function(event) {
			$("#playAnim").removeClass('animated bounceInLeft');			
			$("#playAnim").addClass('animated bounceOutRight');	
			setTimeout(readshow,2000);
		});
		
		$( "body" ).on("click", "#stopAnim", function(event) {		
			stopshow();
		});

		$( "body" ).on("click", "#closeCross", function(event) {	
			//initPage();
			initCta();
		});
		
		$( "body" ).on("click", "#submitQuestion", function(event) {		
	
			$('#ctaForm').removeClass('animated bounceInLeft');
			$('#ctaForm').addClass('animated bounceOutRight');
			sayThanks('Votre demande a été prise en compte. Merci !','yellow');
			setTimeout(initCta, 5000);
				
		});
		
	
			
	});


</script>

</body>
</html>






